webpackJsonp([1],{103:function(e,t){e.exports='<div id="app">\n  <md-toolbar v-if="user" class="md-dense">\n    <h2 class="md-title" style="flex: 1">\n      <router-link style="color: #FFF;" v-if="!popup" :to="{ path: \'/\' }">Grades</router-link>\n      <md-icon v-if="popup" class="md-primary" style="color: #FFF; cursor: pointer" @click.prevent.native="$router.go(-1)">clear</md-icon>\n    </h2>\n    <md-button @click.native="logout()">\n      logout\n    </md-button>\n  </md-toolbar>\n\n  <div class="container">\n    <transition name="transitionName">\n      <router-view></router-view>\n    </transition>\n  </div>\n\n  <md-snackbar md-position="bottom center" ref="snackbar" md-duration="4000">\n    <span>{{error.message}}</span>\n    <md-button class="md-accent" md-theme="light-blue" @click.native="$refs.snackbar.close()">Dismiss</md-button>\n  </md-snackbar>\n</div>\n'},104:function(e,t){e.exports='<div class="home">\n  <h1>Semesters</h1>\n  <md-list>\n    <md-list-item v-for="(semester, i) in semesters" :key="i" :href="\'#/semester/\' + semester.id">\n      <span>{{semester.id}}. Semester</span>\n\n      <md-button class="md-icon-button md-list-action">\n        <md-icon class="md-primary" @click.prevent.native="remove(semester)">clear</md-icon>\n      </md-button>\n    </md-list-item>\n  </md-list>\n\n  <md-button class="md-raised md-primary md-icon-button" @click.native="add">\n    <md-icon>add</md-icon>\n  </md-button>\n</div>\n'},105:function(e,t){e.exports='<div class="login">\n    <md-button @click.native="googleSignIn()" class="md-raised md-warn">\n      Sign in with Google\n    </md-button>\n</div>\n'},106:function(e,t){e.exports='<div id="mark">\n  <h2>{{$route.params.id === 0 ? \'Add\' : \'Edit\'}} Grade</h2>\n  <form novalidate @submit.stop.prevent="submit" v-if="markForm">\n    <md-input-container>\n      <label>Grade</label>\n      <md-input type="number" v-model="markForm.mark"></md-input>\n    </md-input-container>\n\n    <md-input-container>\n      <label>Weighting</label>\n      <md-input type="number" v-model="markForm.weighting"></md-input>\n    </md-input-container>\n\n    <md-button class="md-raised md-primary" type="submit">Submit</md-button>\n  </form>\n</div>\n'},107:function(e,t){e.exports='<div id="module">\n  <h2>{{$route.params.id === 0 ? \'Add\' : \'Edit\'}} Module</h2>\n  <form novalidate @submit.stop.prevent="submit" v-if="moduleForm">\n    <md-input-container>\n      <label>Name</label>\n      <md-input v-model="moduleForm.name"></md-input>\n    </md-input-container>\n\n    <md-input-container>\n      <label>Time</label>\n      <md-input v-model="moduleForm.time"></md-input>\n    </md-input-container>\n\n    <md-input-container>\n      <label>Room</label>\n      <md-input v-model="moduleForm.room"></md-input>\n    </md-input-container>\n\n    <md-button class="md-raised md-primary" type="submit">Submit</md-button>\n  </form>\n</div>\n'},108:function(e,t){e.exports='<div class="semester">\n  <h1>{{semester.id}}. Semester</h1>\n  <router-link :to="{ path: \'module/0\'}" append>\n    <md-button class="md-icon-button md-raised md-primary" style="position: fixed; bottom: 1rem; right: 1rem; z-index:2">\n      <md-icon>add</md-icon>\n    </md-button>\n  </router-link>\n  <md-card v-for="(module, index) of semester.modules" :key="index" style="margin-bottom: 1rem;">\n    <md-card-header>\n      <div class="md-title">{{module.name}}</div>\n      <div class="md-subhead">{{module.time}} - {{module.room}}</div>\n    </md-card-header>\n\n    <md-card-expand>\n      <md-card-actions>\n        <router-link :to="{ path: \'module/\' + module.id}" append>\n          <md-button class="md-raised md-primary">\n            Edit\n          </md-button>\n        </router-link>\n        <md-button @click.native="tryDelete(module)" class="md-raised md-warn">Delete</md-button>\n        <span style="flex: 1"></span>\n        <md-button class="md-icon-button" md-expand-trigger>\n          <md-icon>keyboard_arrow_down</md-icon>\n        </md-button>\n      </md-card-actions>\n      <md-card-content>\n        <md-list>\n          <h3>{{getAvg(module.marks)}}</h3>\n          <md-list-item v-for="(mark, i) of module.marks" :key="i">\n            <span>{{mark.mark}}</span>\n            <md-button class="md-icon-button md-list-action" @click.native="deleteMark(module, mark)">\n              <md-icon class="md-primary">clear</md-icon>\n            </md-button>\n          </md-list-item>\n          <router-link :to="{ path: `module/${module.id}/mark`}" append>\n            <md-button class="md-raised md-primary md-icon-button">\n              <md-icon>add</md-icon>\n            </md-button>\n          </router-link>\n\n        </md-list>\n      </md-card-content>\n    </md-card-expand>\n  </md-card>\n  <md-dialog\n    md-title="Delete"\n    ref="deleteDialog"\n  >\n    <md-dialog-title>Delete</md-dialog-title>\n    <md-dialog-content>\n      Do you really want to delete {{deletingModule.name}}\n    </md-dialog-content>\n    <md-dialog-actions>\n      <md-button class="md-primary" @click.native="$refs[\'deleteDialog\'].close()">Cancel</md-button>\n      <md-button class="md-primary" @click.native="$refs[\'deleteDialog\'].close(); deleteModule()">Ok</md-button>\n    </md-dialog-actions>\n  </md-dialog>\n\n\n\n  \x3c!--<b-table striped hover :items="semester.modules" :fields="fields" @row-clicked="selectModule($event)">\n    <template slot="actions" scope="item">\n      <b-btn variant="warning" size="sm" @click="module = item.item; $root.$emit(\'show::modal\',\'addSemester\')">Edit</b-btn>\n      <b-btn variant="danger" size="sm" @click="deleteModule(item.item)">Delete</b-btn>\n    </template>\n  </b-table>\n  <b-button variant="success" @click="$root.$emit(\'show::modal\',\'addSemester\')">+</b-button>\n\n  <b-modal id="addSemester" title="Edit Module" @ok="submitModule" @shown=" ">\n    <form @submit.stop.prevent="submitModule">\n      <b-form-input class="mb-2" type="text" placeholder="Name" v-model="module.name"></b-form-input>\n      <b-form-input class="mb-2" type="text" placeholder="Time" v-model="module.time"></b-form-input>\n      <b-form-input type="text" placeholder="Room" v-model="module.room"></b-form-input>\n    </form>\n  </b-modal>\n\n  <div class="semester__details mt-4" v-if="selectedModule">\n    <h2>{{selectedModule.name}} - {{average}}</h2>\n    <b-table striped hover :items="selectedModule.marks" :fields="moduleFields">\n      <template slot="actions" scope="item">\n        <b-btn variant="danger" size="sm" @click="deleteMark(item.item)">Delete</b-btn>\n      </template>\n    </b-table>\n    <b-button class="mb-2" variant="success" @click="$root.$emit(\'show::modal\',\'addMark\')">+</b-button>\n\n    <b-modal id="addMark" title="Edit Mark" @ok="submitMark" @shown=" ">\n      <form @submit.stop.prevent="subitMark">\n        <b-form-input class="mb-2" type="number" placeholder="Mark" v-model="mark.mark"></b-form-input>\n        <b-form-input type="number" placeholder="Weighting" v-model="mark.weighting"></b-form-input>\n      </form>\n    </b-modal>\n  </div>--\x3e\n</div>\n'},12:function(e,t,n){"use strict";function i(e){var t=Math.max.apply(Math,a()(e));return!isFinite(t)||isNaN(t)?1:t+1}function o(e){return e&&e.length>0?e.filter(function(e){return!!e}):[]}var r=n(62),a=n.n(r);t.a={newId:i,fixArr:o}},29:function(e,t,n){"use strict";var i=n(45),o=(n.n(i),{apiKey:"AIzaSyBDdJGt_gN7HQ_x-hmm5P3mH35vOEkHU-M",authDomain:"noteapp-a9d06.firebaseapp.com",databaseURL:"https://noteapp-a9d06.firebaseio.com",projectId:"noteapp-a9d06",storageBucket:"noteapp-a9d06.appspot.com",messagingSenderId:"969690445978"});t.a=i.initializeApp(o)},30:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(61),o=n.n(i),r=n(29),a=new o.a(function(e){r.a.auth().onAuthStateChanged(function(t){s.setUser(t),e(t)})}),s={user:null,authenticated:function(){return a.then(function(e){return e&&!e.isAnonymous})},setUser:function(e){this.user=e},login:function(e,t){return r.a.auth().signInWithEmailAndPassword(e,t)},logout:function(){r.a.auth().signOut().then(function(){console.log("logout done")})}}},47:function(e,t,n){"use strict";var i=n(30),o=n(103),r=n.n(o);t.a={template:r.a,name:"app",data:function(){return{error:{},user:null,popup:!1,transitionName:""}},mounted:function(){var e=this;this.$bus.$on("popup",function(t){e.popup=t}),this.$bus.$on("error",function(t){e.error=t,e.$refs.snackbar.open()}),this.$firebase.auth().onAuthStateChanged(function(t){e.user=t||null})},watch:{$route:function(e,t){var n=e.path.split("/").length,i=t.path.split("/").length;this.transitionName=n<i?"slide-right":"slide-left"}},methods:{remove:function(e){this.errors.splice(e,1)},logout:function(){i.a.logout(),this.$router.push("/login")}}}},48:function(e,t,n){"use strict";var i=n(18),o=n(111),r=n(53),a=n(56),s=n(52),m=n(55),d=n(54),u=n(30);i.default.use(o.a);var l=new o.a({routes:[{path:"/",redirect:"/home"},{path:"/login",name:"Login",component:r.a,meta:{auth:!1}},{path:"/home",name:"Home",component:s.a,meta:{auth:!0}},{path:"/semester/:id",name:"Semester",component:a.a,meta:{auth:!0}},{path:"/semester/:id/module/:moduleId",name:"Module",component:m.a,meta:{auth:!0}},{path:"/semester/:id/module/:moduleId/mark",name:"Mark",component:d.a,meta:{auth:!0}}]});l.beforeEach(function(e,t,n){u.a.authenticated().then(function(t){e.meta.auth&&!t?n({path:"/login"}):n()})}),t.a=l},49:function(e,t){},50:function(e,t){},52:function(e,t,n){"use strict";var i=n(60),o=n.n(i),r=n(104),a=n.n(r),s=n(12);t.a={template:a.a,data:function(){return{semestersRef:{},semesters:[]}},mounted:function(){var e=this;this.$bus.$emit("popup",!1);var t=this.$firebase.auth().currentUser;t&&(this.semestersRef=this.$firebase.database().ref(t.uid+"/semesters"),this.semestersRef.on("value",function(t){var n=t.val();if(n&&Array.isArray(n))e.semesters=n.filter(function(e){return!!e});else{var i=o()(n);i&&i.length>0&&(e.semesters=[n[i[0]]])}}))},methods:{add:function(){var e=s.a.newId(this.semesters.map(function(e){return e.id}));this.semestersRef.child("/"+e).set({id:e})},remove:function(e){this.semestersRef.child("/"+e.id).remove()}}}},53:function(e,t,n){"use strict";var i=n(105),o=n.n(i),r=n(45),a=n.n(r);t.a={template:o.a,data:function(){return{email:"",password:""}},mounted:function(){var e=this;this.$firebase.auth().getRedirectResult().catch(function(t){return e.$bus.$emit("error",t)}),this.$firebase.auth().onAuthStateChanged(function(t){t&&e.$router.push("/home")})},methods:{googleSignIn:function(){var e=new a.a.auth.GoogleAuthProvider;e.addScope("https://www.googleapis.com/auth/plus.login"),this.$firebase.auth().signInWithRedirect(e)}}}},54:function(e,t,n){"use strict";var i=n(106),o=n.n(i),r=n(12);t.a={template:o.a,data:function(){return{moduleRef:null,module:null,markForm:{mark:0,weighting:0}}},created:function(){var e=this;this.$bus.$emit("popup",!0);var t=this.$route.params.id,n=parseInt(this.$route.params.moduleId,10),i=this.$firebase.auth().currentUser;this.moduleRef=this.$firebase.database().ref(i.uid+"/semesters/"+t+"/modules/"+n),this.moduleRef.on("value",function(t){e.module=t.val(),e.module.marks=r.a.fixArr(e.module.marks)})},methods:{submit:function(){var e=r.a.newId(this.module.marks?this.module.marks.map(function(e){return e.id}):[]),t={id:e,mark:parseFloat(this.markForm.mark),weighting:parseInt(this.markForm.weighting,10)};this.moduleRef.child("marks/"+t.id).set(t),this.$router.go(-1)},clearMark:function(){this.markForm={name:"",time:"",room:""}}}}},55:function(e,t,n){"use strict";var i=n(59),o=n.n(i),r=n(107),a=n.n(r),s=n(12);t.a={template:a.a,data:function(){return{semesterRef:null,semester:null,initialModuleForm:{id:0,name:"",time:"",room:""},moduleForm:{}}},created:function(){var e=this;this.$bus.$emit("popup",!0);var t=this.$route.params.id,n=parseInt(this.$route.params.moduleId,10),i=this.$firebase.auth().currentUser;this.semesterRef=this.$firebase.database().ref(i.uid+"/semesters/"+t),this.semesterRef.on("value",function(t){e.semester=t.val(),e.moduleForm=e.semester.modules.find(function(e){return e&&e.id===n})||e.initialModuleForm})},methods:{submit:function(){var e=s.a.newId(this.semester.modules?this.semester.modules.map(function(e){return e.id}):[]),t=this.moduleForm.id?this.moduleForm:o()({},this.moduleForm,{id:e});this.semesterRef.child("modules/"+t.id).set(t),this.$router.go(-1)},clearModule:function(){this.moduleForm={name:"",time:"",room:""}}}}},56:function(e,t,n){"use strict";var i=n(108),o=n.n(i),r=n(12);t.a={template:o.a,data:function(){return{semester:{},semesterRef:{},deletingModule:{}}},created:function(){var e=this;this.$bus.$emit("popup",!1);var t=this.$route.params.id,n=this.$firebase.auth().currentUser;t&&n&&(this.semesterRef=this.$firebase.database().ref(n.uid+"/semesters/"+t),this.semesterRef.on("value",function(t){var n=t.val();if(e.semester=n,e.semester.modules=r.a.fixArr(e.semester.modules),e.semester.modules.forEach(function(e){e.marks=r.a.fixArr(e.marks)}),e.selectedModule){var i=e.semester.modules?e.semester.modules.find(function(t){return e.selectedModule.id===t.id}):null;e.selectModule(i)}}))},methods:{getAvg:function(e){if(e&&e.length){var t=r.a.fixArr(e),n=t.map(function(e){return e.mark*e.weighting}).reduce(function(e,t){return e+t}),i=t.map(function(e){return e.weighting}).reduce(function(e,t){return e+t}),o=n/i;return Math.round(100*o)/100}return"No grades available"},tryDelete:function(e){this.deletingModule=e,this.$refs.deleteDialog.open()},deleteModule:function(){this.semesterRef.child("modules/"+this.deletingModule.id).remove()},deleteMark:function(e,t){this.semesterRef.child("modules/"+e.id+"/marks/"+t.id).remove()},clearMark:function(){this.mark={mark:"",weighting:""}}}}},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=n(51),r=n.n(o),a=n(48),s=n(29),m=n(47);n(50),n(49),i.default.config.productionTip=!1,i.default.use(r.a),i.default.prototype.$bus=new i.default,i.default.prototype.$firebase=s.a,new i.default({el:"#app",router:a.a,template:"<App/>",components:{App:m.a}})}},[57]);
//# sourceMappingURL=app.3b9398f884f41b6a34cf.js.map